{{ define "main" }}
<div class="row justify-content-center">
  <div class="col-md-12 col-lg-9">
    {{ if .Params.avatar -}}
      {{ $image := .Resources.GetMatch (printf "**%s" .Params.avatar) -}}
      {{ $imageLq := $image.Resize "15x15 webp q95" -}}
      {{ $image = $image.Resize "300x300 webp q95" -}}
      <div class="contributor-image">
        <img class="img-fluid lazyload blur-up rounded-circle" src="{{ $imageLq.RelPermalink }}" data-src="{{ $image.RelPermalink }}" alt="{{ .Title }}" width="150" height="150">
      </div>
    {{ end -}}
    {{ with .Params.headline -}}
      <h1 class="text-center">{{ . }}</h1>
    {{ else -}}
      <h1 class="text-center">{{ .Title }}</h1>
    {{ end -}}
    {{ with .Params.summary -}}<p class="lead text-center">{{ . }}</p>{{ end -}}
    {{ with .Content -}}<div class="text-center">{{ . }}</div>{{ end -}}
  </div>
</div>
<!-- TODO fix here formating to make them Bootstap5 way -->
<div class="row justify-content-center mt-3" style="column-gap: 3rem;" data-masonry='{"percentPosition": true }'>
  {{/*  <div class="col-lg-8">  */}}
    {{ $paginator := .Paginate (.Data.Pages) -}}
    {{ range $paginator.Pages -}}
      <div class="card col-lg-7" style="margin: 1.5em 1.5em; padding: 0;">
        {{ if site.Params.doks.imageList -}}
          {{- $images := .Resources.ByType "image" -}}
          {{- $featured := $images.GetMatch "*thumb*" -}}
          {{- if not $featured }}{{ $featured = .Params.thumb }}{{ end -}}
          {{- if $featured -}}
            {{ partial "img" (dict
            "page" .
            "src" $featured
            "alt" .Title
            "class" "rounded-top-1"
            )}}
          {{ end -}}
        {{ end -}}
        <div class="card-body" style="padding: 0 1.5em">
          <article>
            <h2 class="h3"><a class="stretched-link text-body" href="{{ .RelPermalink }}">{{ .Params.title }}</a></h2>
            <p>{{ .Params.summary | safeHTML }}</p>
            {{ partial "main/blog-meta.html" . -}}
          </article>
        </div>
      </div>
    {{ end -}}
  {{/*  </div>  */}}
</div>
<div class="row justify-content-center mt-5">
  <div class="col-md-12 col-lg-9">
    {{ template "_internal/pagination.html" . }}
  </div>
</div>
{{ end }}
